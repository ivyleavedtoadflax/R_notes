<html>

<head>
<style type="text/css">
.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<title>Getting Started with R - Histograms and Box and whisker plots</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css">

</head>

<body>

<table align="center" style="width:80%;">
<tr>
<td class="next"><a href="scatterplots.html">Previous</a></td>
<td class="next"><a href="index.html">Course Overview</a></td>
<td class="next"><a href="multiple_plots.html">Next</a></td>
</tr>
</table>


<br><hr class="ex1"><br>

<h1>Histograms and Box and whisker plots</h1>

<p>Histograms and boxplots are two methods of displaying information about the distribution of a dataset.</p>

<p>The good news is that most of the commands that we have covered in the previous section on scatterplots and generic, and they can also be used when producing histograms and boxplots.</p>

<h3>Histograms</h3>

<p>We've already plotted one histogram in the previous section, so let's look again at that plot.</p>

<p>First, we will look at the data.</p>

<div class="chunk" id="histograms-1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">hist</span><span class="hl std">(</span>
     <span class="hl std">normal_data</span>
     <span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/histograms-1.png" title="plot of chunk histograms-1" alt="plot of chunk histograms-1" class="plot" /></div></div>


<p>Simple enough. But if like me, you are a little pedantic about your plots, you may also want to make some changes...</p>

<div class="chunk" id="histograms-2"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">hist</span><span class="hl std">(</span>
     <span class="hl std">normal_data,</span>
     <span class="hl kwc">main</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">,</span>
     <span class="hl kwc">xlab</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">,</span>
     <span class="hl kwc">col</span><span class="hl std">=</span><span class="hl str">&quot;gray80&quot;</span><span class="hl std">,</span>
     <span class="hl kwc">cex</span> <span class="hl std">=</span> <span class="hl num">1.4</span><span class="hl std">,</span>
     <span class="hl kwc">cex.axis</span> <span class="hl std">=</span> <span class="hl num">1.2</span><span class="hl std">,</span>
     <span class="hl kwc">cex.lab</span> <span class="hl std">=</span> <span class="hl num">1.2</span>
     <span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/histograms-2.png" title="plot of chunk histograms-2" alt="plot of chunk histograms-2" class="plot" /></div></div>



<p>Bear in mind that we need to make some assumptions when we draw a histogram - i.e. where to choose the break points for the bins (columns). It's usually fine to leave R to make the decision for us, but we can see the result of making changes to the break points below.</p>

<div class="chunk" id="histograms-3"><div class="rimage default"><img src="figure/histograms-3.png" title="plot of chunk histograms-3" alt="plot of chunk histograms-3" class="plot" /></div></div>



<p>You may also at some point wish to compare two histograms by overlaying one over the other. This can be done with a few tweaks, as seen in the example below. Note that we have again had to specify the number of breaks. Hence we have made some assumptions about how to display this data.</p>

<div class="chunk" id="histograms-4"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">set.seed</span><span class="hl std">(</span><span class="hl num">1337</span><span class="hl std">)</span>
<span class="hl com"># create two normally distributed vectors of random data</span>
<span class="hl std">data_a</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">rnorm</span><span class="hl std">(</span>
     <span class="hl num">100</span><span class="hl std">,</span>
     <span class="hl kwc">mean</span> <span class="hl std">=</span> <span class="hl num">0</span><span class="hl std">,</span>
     <span class="hl kwc">sd</span> <span class="hl std">=</span> <span class="hl num">2</span>
     <span class="hl std">)</span>
<span class="hl std">data_b</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">rnorm</span><span class="hl std">(</span>
     <span class="hl num">100</span><span class="hl std">,</span>
     <span class="hl kwc">mean</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">,</span>
     <span class="hl kwc">sd</span> <span class="hl std">=</span> <span class="hl num">2</span>
     <span class="hl std">)</span>
<span class="hl com"># Plot first graph</span>
<span class="hl std">p1</span><span class="hl kwb">&lt;-</span><span class="hl kwd">hist</span><span class="hl std">(</span>
     <span class="hl std">data_a,</span>
     <span class="hl kwc">ylim</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">0</span><span class="hl std">,</span><span class="hl num">25</span><span class="hl std">),</span>
     <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">rgb</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span><span class="hl num">0</span><span class="hl std">,</span><span class="hl num">0</span><span class="hl std">,</span><span class="hl num">0.5</span><span class="hl std">),</span>
     <span class="hl kwc">main</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">,</span>
     <span class="hl kwc">breaks</span> <span class="hl std">=</span> <span class="hl num">10</span><span class="hl std">,</span>
     <span class="hl kwc">xlab</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">,</span>
     <span class="hl kwc">cex</span> <span class="hl std">=</span> <span class="hl num">1.4</span><span class="hl std">,</span>
     <span class="hl kwc">cex.axis</span> <span class="hl std">=</span> <span class="hl num">1.2</span><span class="hl std">,</span>
     <span class="hl kwc">cex.lab</span> <span class="hl std">=</span> <span class="hl num">1.2</span>
     <span class="hl std">)</span>
<span class="hl com"># Note that you must specify an 'alpha' of less than 1 (the fourth argument in</span>
<span class="hl com"># the rgb command), otherwise, your two colours will be completely solid. </span>
<span class="hl com"># Plot second graph - note use of 'add = TRUE' to overlay onto the first plot</span>
<span class="hl std">p2</span><span class="hl kwb">&lt;-</span><span class="hl kwd">hist</span><span class="hl std">(</span>
     <span class="hl std">data_b,</span>
     <span class="hl kwc">breaks</span> <span class="hl std">=</span> <span class="hl num">10</span><span class="hl std">,</span>
     <span class="hl kwc">add</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">,</span>
     <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">rgb</span><span class="hl std">(</span><span class="hl num">0</span><span class="hl std">,</span><span class="hl num">0</span><span class="hl std">,</span><span class="hl num">1</span><span class="hl std">,</span><span class="hl num">0.5</span><span class="hl std">),</span>
     <span class="hl kwc">cex</span> <span class="hl std">=</span> <span class="hl num">1.4</span><span class="hl std">,</span>
     <span class="hl kwc">cex.axis</span> <span class="hl std">=</span> <span class="hl num">1.2</span><span class="hl std">,</span>
     <span class="hl kwc">cex.lab</span> <span class="hl std">=</span> <span class="hl num">1.2</span>
     <span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/histograms-4.png" title="plot of chunk histograms-4" alt="plot of chunk histograms-4" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r">
</pre></div>
</div></div>


<h3>Box and whisker plots</h3>

<p>Boxplots similarly display information about the distribution of data, and the have the benefit of not having to make assumptions about bin width. They are not completely free of assumptions however.</p>

<p>A basic boxplot is shown below.</p> 

<div class="chunk" id="histograms-5"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">set.seed</span><span class="hl std">(</span><span class="hl num">1337</span><span class="hl std">)</span>
<span class="hl std">boxplot_data</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">rnorm</span><span class="hl std">(</span>
     <span class="hl kwc">n</span> <span class="hl std">=</span> <span class="hl num">500</span><span class="hl std">,</span>
     <span class="hl kwc">sd</span> <span class="hl std">=</span> <span class="hl num">10</span><span class="hl std">,</span>
     <span class="hl kwc">mean</span> <span class="hl std">=</span> <span class="hl num">1</span>
     <span class="hl std">)</span>
<span class="hl kwd">boxplot</span><span class="hl std">(</span>
     <span class="hl kwc">x</span> <span class="hl std">= boxplot_data,</span>
     <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl str">&quot;aliceblue&quot;</span><span class="hl std">,</span>
     <span class="hl kwc">cex</span> <span class="hl std">=</span> <span class="hl num">1.4</span><span class="hl std">,</span>
     <span class="hl kwc">cex.axis</span> <span class="hl std">=</span> <span class="hl num">1.2</span><span class="hl std">,</span>
     <span class="hl kwc">cex.lab</span> <span class="hl std">=</span> <span class="hl num">1.2</span>
     <span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/histograms-5.png" title="plot of chunk histograms-5" alt="plot of chunk histograms-5" class="plot" /></div></div>


<p>In this example the thick line at the centre shows the median, the top and bottom of the box shows the upper and lower quartile, whilst the 'whisker' show the upper and low adjacent values. These are the highest and lowest values within 1.5 times the interquartile range (upper - lower quartile) of the upper and lower quartile respectively. Any values beyond the adjacent values are considered 'outliers' and represented by points.</p>

<p>Note that this is not the only way of representing data in box and whisker plots. The other possibilities are listed here: <a href="http://en.wikipedia.org/wiki/Box_plot">http://en.wikipedia.org/wiki/Box_plot</a>. For this reason, you should always mention what your boxplot is actually showing in the caption.</p>

<h4>Multiple box plots</h4>

<p>One of the great strengths of the boxplot, is that it allows you to plot several different data sets side by side, in a much more simple and easily comparable manner than with histograms.</p>

<div class="ex">

<h3>Exercise</h3>

<p>In the next example we will use a real dataset which you are required to download from the internet and load into R using the methods we have learnt so far.</p>

<p>The data are available here: <a href="https://db.tt/JEoe3mQZ">https://db.tt/JEoe3mQZ</a></p>

<!--read.table("https://docs.google.com/spreadsheet/pub?hl=en&hl=en&key=0AjOX9_-v82CydHNneXg0WHZ6ZnZZU2FZTHgxdndKUEE&single=true&gid=0&output=csv",sep=",",header=T)//-->
<p>Save this file to your desktop and import it to R, so that R recognises the column headings. Call the new variable <tt>car_prices</tt>.</p>
</div>

<p>This data compares the asking two prices of two cars: one diesel, and one petrol, from 216 car adverts. In the following example we will produce boxplots which compare the asking prices. We need to use the <tt>split()</tt> command for this.</p>

<p>The <tt>split()</tt> command literally splits a dataset according to a particular categorical variable.</p>

<div class="chunk" id="histograms-6"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Check the data</span>
<span class="hl kwd">str</span><span class="hl std">(</span>
     <span class="hl std">car_prices</span>
     <span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 'data.frame':	216 obs. of  5 variables:
##  $ year : int  2005 2005 2005 2005 2005 2005 2005 2005 2005 2005 ...
##  $ miles: int  91000 113452 114000 157000 117000 98000 91000 88000 72150 110000 ...
##  $ price: int  1795 1900 1945 1989 2000 2195 2250 2295 2350 2350 ...
##  $ type : Factor w/ 2 levels "private","trade": 2 1 2 2 2 1 1 2 2 2 ...
##  $ fuel : Factor w/ 2 levels "diesel","petrol": 2 2 2 2 2 2 2 2 2 2 ...
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Split it according to fuel type - note the $ operator - this is required in this case</span>
<span class="hl kwd">split</span><span class="hl std">(</span>
     <span class="hl std">car_prices</span><span class="hl opt">$</span><span class="hl std">price,</span>
     <span class="hl std">car_prices</span><span class="hl opt">$</span><span class="hl std">fuel</span>
     <span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## $diesel
##  [1] 2590 2995 3485 3295 3295 2545 2871 2951 2195 2690 3250 1795 1495 2495
## [15] 1995 2495 2295 1789 1995 1795 2395 1895 1250 1695 2495 1800 1999 2295
## [29] 1499 1550 2489 2490 2000 2475 1525 2495 1290 1795 1880 1990 1195 1390
## [43] 1750 1787 1770 2500 1600  995 1495 2295 1675 1200 2000 1699 1595 1475
## [57]  999 1199 1650 1290 1200  995  995
## 
## $petrol
##   [1] 1795 1900 1945 1989 2000 2195 2250 2295 2350 2350 2350 2395 2400 2450
##  [15] 2475 2490 2490 2490 2490 2495 2495 2495 2495 2495 2595 2595 2600 2625
##  [29] 2650 2695 2695 2750 2775 2790 2795 2795 2795 2795 2795 2795 2795 2803
##  [43] 2850 2875 2890 2895 2895 2895 2990 2990 2990 2990 2990 2991 2991 2991
##  [57] 2994 2995 2995 2995 2995 2995 2995 2995 2995 2995 2995 2995 2995 2999
##  [71] 3000 3000 3000 3000 3000 3000 3000 3175 3195 3195 3195 3200 3281 3290
##  [85] 3295 3295 3295 3295 3295 3295 3295 3295 3295 3295 3299 3400 3450 3482
##  [99] 3494 3495 3495 3495 3495 3495 3495 3499 3499 3499 3500 3500 3690 3694
## [113] 3695 3695 3695 3695 3695 3695 3695 3699 3795 3795 3795 3795 3795 3795
## [127] 3799 3888 3890 3895 3900 3970 3985 3990 3990 3991 3995 3995 3995 3995
## [141] 3995 3995 3995 3995 4000 4000 4000 4190 4288 4295 4295 4295 4390
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># This can simply be wrapped by a call to the boxplot() function</span>
<span class="hl kwd">boxplot</span><span class="hl std">(</span>
     <span class="hl kwd">split</span><span class="hl std">(</span>
          <span class="hl std">car_prices</span><span class="hl opt">$</span><span class="hl std">price,</span>
          <span class="hl std">car_prices</span><span class="hl opt">$</span><span class="hl std">fuel</span>
          <span class="hl std">),</span>
     <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;#66C2A5&quot;</span><span class="hl std">,</span><span class="hl str">&quot;#FC8D62&quot;</span><span class="hl std">)</span>
     <span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/histograms-6.png" title="plot of chunk histograms-6" alt="plot of chunk histograms-6" class="plot" /></div></div>


<p>We can make additional splits to this dataset if we like, by using a <tt>list</tt> of factors to split the data by.</p>

<div class="chunk" id="histograms-8"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">boxplot</span><span class="hl std">(</span>
     <span class="hl kwd">split</span><span class="hl std">(</span>
          <span class="hl std">car_prices</span><span class="hl opt">$</span><span class="hl std">price,</span>
          <span class="hl kwd">list</span><span class="hl std">(</span>
               <span class="hl std">car_prices</span><span class="hl opt">$</span><span class="hl std">fuel,</span>
               <span class="hl std">car_prices</span><span class="hl opt">$</span><span class="hl std">type</span>
               <span class="hl std">)</span>
          <span class="hl std">),</span>
     <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;#66C2A5&quot;</span><span class="hl std">,</span><span class="hl str">&quot;#FC8D62&quot;</span><span class="hl std">),</span>
     <span class="hl kwc">ylab</span><span class="hl std">=</span><span class="hl kwd">bquote</span><span class="hl std">(Asking</span><span class="hl opt">~</span><span class="hl std">Price</span><span class="hl opt">~</span><span class="hl std">(</span><span class="hl str">&quot;£&quot;</span><span class="hl std">))</span>
     <span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/histograms-8.png" title="plot of chunk histograms-8" alt="plot of chunk histograms-8" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r">
# Using bquote() is required here to display the £ sign correctly
</pre></div>
</div></div>


<div class="ex">

<h3>Exercise</h3>

<p>Using the methods above, produce a <tt>boxplot</tt> of the <tt>car_prices</tt> data, splitting teh data by seller <tt>type</tt></p>

</div>

<br><hr class="ex1"><br>

<table align="center" style="width:80%;">
<tr>
<td class="next"><a href="scatterplots.html">Previous</a></td>
<td class="next"><a href="index.html">Course Overview</a></td>
<td class="next"><a href="multiple_plots.html">Next</a></td>
</tr>
</table>



</body>

</html>
