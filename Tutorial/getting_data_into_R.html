<html>

<head>
<style type="text/css">.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}</style>
<title>Getting Started with R - Getting data into R</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css">

</head>

<body>

<h1>Getting data into R</h1>

<p>Probably the first question you are likely to ask when approaching R for the first time is 'how do I get my data into R'?</p>

<p>R is able to read directly from excel spread sheets using a number of packages, however they usually take some tweaking. In this tutorial we will restrict ourselves to importing data from 'comma separated values' (.csv) files and 'tab delimited' text files (.txt). You can create files in this format using the 'Save As' menu in Excel, or whichever spread sheet software you are using.</p>

<h2>Small variables</h2>

<p>Sometimes you will need to insert data into R which is small and is not stored in an external file. There are two easy wasy to do this.</p>

<p> Note that in the following (and all subsequent code chunks) anything preceded with a # is ignored by R and referred to as a 'comment' -ignore the colour in this document it's a quirk of the software used to produce it.</p>

<p>It is a good idea to get into the habit of commenting every few lines of code, and explain why - not necessarily how (as this will be self evident) you have written a certain line of code. It makes reading code much easier, especially if you didn't write it.</p>

<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="source"><pre class="knitr r">
<span class="hl com"># Create an object called short_variable, and assign a series of numbers</span>
<span class="hl com"># to it.</span>

# We use <span class="hl str">'&lt;-'</span> to create the object. This is called <span class="hl str">'gets'</span>.

short_variable &lt;- <span class="hl kwd">c</span>(1, 5, 6, 7, 9, 2, 10)

<span class="hl com"># To see what is contained within an object, simply input the name of the</span>
<span class="hl com"># object.</span>

short_variable
</pre></div>
<div class="output"><pre class="knitr r">## [1]  1  5  6  7  9  2 10
</pre></div>
<div class="source"><pre class="knitr r">
# Note that this the equivalent <span class="hl kwa">in</span> R of writing <span class="hl kwd">print</span>(short_variable).
<span class="hl com"># This is not particularly important <span class="hl kwa">in</span> this course, but it becomes</span>
<span class="hl com"># important as you begin to write your own functions.</span>

<span class="hl kwd">print</span>(short_variable)
</pre></div>
<div class="output"><pre class="knitr r">## [1]  1  5  6  7  9  2 10
</pre></div>
<div class="source"><pre class="knitr r">
<span class="hl com"># A more convenient way of entering a series of numbers is to use the</span>
# <span class="hl kwd">scan</span>() <span class="hl kwa">function</span>.  You must still assign a name to the object you are
# creating as before, but <span class="hl kwd">scan</span>() Will allow you to enter the data more
<span class="hl com"># easily.</span>

<span class="hl com"># Try that now.</span>
</pre></div>
</div></div>


<h2>Importing tables</h2>

<p>Obviously you won't want to manually input all your data, it is much easier to import from a file which you have prepared in a spread sheet. As mentioned, in this course we will work exclusively with the simple formats '.csv' and .txt.</p>

<p>When importing data from files, there are a few rules that must be adhered to, otherwise R will throw up an error.</p>

<ul>
<li>Data must be complete. Any missing values should be replaced with NA.</li>
<li>There must be no spaces in text (e.g. column titles), you should either use underscores, e.g.: my_variable, or conflate words using capitals to sperate, e.g.: myVariable.</li>
<li>Data should be arranged in 'long' format and be 'tidy'. This is required for many types of analysis in R - a good paper on this can be found <a href="http://vita.had.co.nz/papers/tidy-data.pdf">here</a> - more on this later.</li>
</ul>

<p>Let's assume we've done that already:</p>

<div class="chunk" id="unnamed-chunk-2"><div class="rcode"><div class="source"><pre class="knitr r">
# To import from a <span class="hl str">'.txt'</span> file we used the <span class="hl kwd">read.table</span>() <span class="hl kwa">function</span> again you
<span class="hl com"># must assign the <span class="hl kwa">function</span> a name first. In this case we will import a</span>
# data file referred to <span class="hl kwa">in</span> <span class="hl str">'The R book'</span>. Notice that we are able to import
<span class="hl com"># it directly from the internet, but the location could just as easily be</span>
# a local folder: <span class="hl str">'C://data/'</span>

rats &lt;- <span class="hl kwd">read.table</span>(<span class="hl str">"http://www.bio.ic.ac.uk/research/mjcraw/therbook/data/rats.txt"</span>, 
    header = T)

<span class="hl com"># Call the data to examine it. Note this data is dealt with on p475 of</span>
# <span class="hl str">'The R Book'</span>

rats
</pre></div>
<div class="output"><pre class="knitr r">##    Glycogen Treatment Rat Liver
## 1       131         1   1     1
## 2       130         1   1     1
## 3       131         1   1     2
## 4       125         1   1     2
## 5       136         1   1     3
## 6       142         1   1     3
## 7       150         1   2     1
## 8       148         1   2     1
## 9       140         1   2     2
## 10      143         1   2     2
## 11      160         1   2     3
## 12      150         1   2     3
## 13      157         2   1     1
## 14      145         2   1     1
## 15      154         2   1     2
## 16      142         2   1     2
## 17      147         2   1     3
## 18      153         2   1     3
## 19      151         2   2     1
## 20      155         2   2     1
## 21      147         2   2     2
## 22      147         2   2     2
## 23      162         2   2     3
## 24      152         2   2     3
## 25      134         3   1     1
## 26      125         3   1     1
## 27      138         3   1     2
## 28      138         3   1     2
## 29      135         3   1     3
## 30      136         3   1     3
## 31      138         3   2     1
## 32      140         3   2     1
## 33      139         3   2     2
## 34      138         3   2     2
## 35      134         3   2     3
## 36      127         3   2     3
</pre></div>
</div></div>


<p>This isn't a particularly big table so we can view the whole thing at once, but if it was longer we might want to summarise the data or look at smaller chunks fo it.</p>

<div class="chunk" id="unnamed-chunk-3"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># we can look at the first 6 rows with:</span>

<span class="hl kwd">head</span>(rats)
</pre></div>
<div class="output"><pre class="knitr r">##   Glycogen Treatment Rat Liver
## 1      131         1   1     1
## 2      130         1   1     1
## 3      131         1   1     2
## 4      125         1   1     2
## 5      136         1   1     3
## 6      142         1   1     3
</pre></div>
<div class="source"><pre class="knitr r">

<span class="hl com"># Or the last 6 rows with:</span>

<span class="hl kwd">tail</span>(rats)
</pre></div>
<div class="output"><pre class="knitr r">##    Glycogen Treatment Rat Liver
## 31      138         3   2     1
## 32      140         3   2     1
## 33      139         3   2     2
## 34      138         3   2     2
## 35      134         3   2     3
## 36      127         3   2     3
</pre></div>
<div class="source"><pre class="knitr r">
<span class="hl com"># We can select individual columns or rows with square brackets. rats[1,1]</span>
<span class="hl com"># will give you the value on the first row of the first column:</span>

rats[1, 1]
</pre></div>
<div class="output"><pre class="knitr r">## [1] 131
</pre></div>
<div class="source"><pre class="knitr r">
<span class="hl com"># The first number denotes row, the second column. So to see the whole</span>
<span class="hl com"># first row, we do:</span>

rats[1, ]
</pre></div>
<div class="output"><pre class="knitr r">##   Glycogen Treatment Rat Liver
## 1      131         1   1     1
</pre></div>
<div class="source"><pre class="knitr r">
<span class="hl com"># We can also specify a series by using a colon:</span>

rats[1:10, ]
</pre></div>
<div class="output"><pre class="knitr r">##    Glycogen Treatment Rat Liver
## 1       131         1   1     1
## 2       130         1   1     1
## 3       131         1   1     2
## 4       125         1   1     2
## 5       136         1   1     3
## 6       142         1   1     3
## 7       150         1   2     1
## 8       148         1   2     1
## 9       140         1   2     2
## 10      143         1   2     2
</pre></div>
<div class="source"><pre class="knitr r">
# If we wanted every third row, we could use the <span class="hl kwd">seq</span>() <span class="hl kwa">function</span>:

rats[<span class="hl kwd">seq</span>(3, 36, 3), ]
</pre></div>
<div class="output"><pre class="knitr r">##    Glycogen Treatment Rat Liver
## 3       131         1   1     2
## 6       142         1   1     3
## 9       140         1   2     2
## 12      150         1   2     3
## 15      154         2   1     2
## 18      153         2   1     3
## 21      147         2   2     2
## 24      152         2   2     3
## 27      138         3   1     2
## 30      136         3   1     3
## 33      139         3   2     2
## 36      127         3   2     3
</pre></div>
<div class="source"><pre class="knitr r">
<span class="hl com"># In this case the three arguments <span class="hl kwa">in</span> the seq <span class="hl kwa">function</span> mean: start at</span>
<span class="hl com"># value 3, end at value 36, and jump 3 rows at a time.</span>

<span class="hl com"># We can also compute some summary statistics from the data:</span>

<span class="hl kwd">summary</span>(rats)
</pre></div>
<div class="output"><pre class="knitr r">##     Glycogen     Treatment      Rat          Liver  
##  Min.   :125   Min.   :1   Min.   :1.0   Min.   :1  
##  1st Qu.:136   1st Qu.:1   1st Qu.:1.0   1st Qu.:1  
##  Median :141   Median :2   Median :1.5   Median :2  
##  Mean   :142   Mean   :2   Mean   :1.5   Mean   :2  
##  3rd Qu.:150   3rd Qu.:3   3rd Qu.:2.0   3rd Qu.:3  
##  Max.   :162   Max.   :3   Max.   :2.0   Max.   :3
</pre></div>
<div class="source"><pre class="knitr r">
<span class="hl com"># Or look at the structure of the object</span>

<span class="hl kwd">str</span>(rats)
</pre></div>
<div class="output"><pre class="knitr r">## 'data.frame':	36 obs. of  4 variables:
##  $ Glycogen : int  131 130 131 125 136 142 150 148 140 143 ...
##  $ Treatment: int  1 1 1 1 1 1 1 1 1 1 ...
##  $ Rat      : int  1 1 1 1 1 1 2 2 2 2 ...
##  $ Liver    : int  1 1 2 2 3 3 1 1 2 2 ...
</pre></div>
</div></div>


<p> <b>str()</b> is useful, because it lets us know how R is seeing the parts of this table. <b>int</b> for instance means integer. If we were wanting to conduct an ANOVA on the rats data, we would need to tell R that Treatment, Rat and, Liver are categorical values, not continuous, otherwise we would be doing the wrong analysis. Note that R will always assume integers to be continuous, unless we explicitly tell it otherwise by labelling it as a <b>factor</b>.</p>


<div class="chunk" id="unnamed-chunk-4"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># To solve this, either use characters - A, B, C instead of 1, 2, 3 <span class="hl kwa">for</span></span>
<span class="hl com"># factors, or convert them manually:</span>

rats$Treatment &lt;- <span class="hl kwd">factor</span>(rats$Treatment)

<span class="hl com"># By using the factor command, we <span class="hl kwa">in</span> effect convert a continuous variable</span>
<span class="hl com"># into a categorical one:</span>

<span class="hl kwd">str</span>(rats)
</pre></div>
<div class="output"><pre class="knitr r">## 'data.frame':	36 obs. of  4 variables:
##  $ Glycogen : int  131 130 131 125 136 142 150 148 140 143 ...
##  $ Treatment: Factor w/ 3 levels "1","2","3": 1 1 1 1 1 1 1 1 1 1 ...
##  $ Rat      : int  1 1 1 1 1 1 2 2 2 2 ...
##  $ Liver    : int  1 1 2 2 3 3 1 1 2 2 ...
</pre></div>
</div></div>


<p>Now convert Rat and Liver into categorical variables in the same way - we will need this data later.</p>




<p>There is a dedicated function <b>revalue()</b> to convert numerical factor levels to character based levels in the library <b>plyr</b>. This can save you the hassle of using <b>factor()</b> each time you open a dataset (although you could of course do this in your spreadsheet).</p>



<div class="chunk" id="unnamed-chunk-6"><div class="rcode"><div class="source"><pre class="knitr r">
<span class="hl com"># Install the package plyr - <span class="hl kwa">if</span> you don't have it already - note you can</span>
# check this on the right hand <span class="hl str">'packages'</span> tab of RStudio. But, it doesn't
<span class="hl com"># hurt to run the command again, even <span class="hl kwa">if</span> it is installed!</span>

<span class="hl kwd">install.packages</span>(<span class="hl str">"plyr"</span>, repos = <span class="hl str">"http://cran.rstudio.com/"</span>)
</pre></div>
<div class="message"><pre class="knitr r">## Installing package into 'C:/Users/s162906/Documents/R/win-library/3.0' (as
## 'lib' is unspecified)
</pre></div>
<div class="output"><pre class="knitr r">## package 'plyr' successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
## 	C:\Users\s162906\AppData\Local\Temp\RtmpKOPhWA\downloaded_packages
</pre></div>
<div class="source"><pre class="knitr r">
<span class="hl com"># Load the package:</span>

<span class="hl kwd">library</span>(plyr)

rats$Treatment1 &lt;- <span class="hl kwd">revalue</span>(rats$Treatment, <span class="hl kwd">c</span>(`1` = <span class="hl str">"A"</span>, `2` = <span class="hl str">"B"</span>, `3` = <span class="hl str">"C"</span>))

rats$Treatment
</pre></div>
<div class="output"><pre class="knitr r">##  [1] 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3
## [36] 3
## Levels: 1 2 3
</pre></div>
<div class="source"><pre class="knitr r">rats$Treatment1
</pre></div>
<div class="output"><pre class="knitr r">##  [1] A A A A A A A A A A A A B B B B B B B B B B B B C C C C C C C C C C C
## [36] C
## Levels: A B C
</pre></div>
</div></div>



<p>Note that in these two examples we refer to the individual columns of the table with a <b>$</b>. R studio is great for this. Type <b>rats$</b> in the console and the press the tab button. RStudio will then automatically complete the variable name, or give you the options available. Try it.</p>

<p>We could also have referred to the columns by number: <b>rats[ ,1]</b>.</p>

<p>Another option which gives you a much more familiar spread sheet like view is <b>fix(rats)</b> - try this too.</p>

<p>If you have followed the above instructions, you should have something that looks like this:</p>

<div class="chunk" id="unnamed-chunk-7"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">str</span>(rats)
</pre></div>
<div class="output"><pre class="knitr r">## 'data.frame':	36 obs. of  5 variables:
##  $ Glycogen  : int  131 130 131 125 136 142 150 148 140 143 ...
##  $ Treatment : Factor w/ 3 levels "1","2","3": 1 1 1 1 1 1 1 1 1 1 ...
##  $ Rat       : Factor w/ 2 levels "1","2": 1 1 1 1 1 1 2 2 2 2 ...
##  $ Liver     : Factor w/ 3 levels "1","2","3": 1 1 2 2 3 3 1 1 2 2 ...
##  $ Treatment1: Factor w/ 3 levels "A","B","C": 1 1 1 1 1 1 1 1 1 1 ...
</pre></div>
<div class="source"><pre class="knitr r">
rats
</pre></div>
<div class="output"><pre class="knitr r">##    Glycogen Treatment Rat Liver Treatment1
## 1       131         1   1     1          A
## 2       130         1   1     1          A
## 3       131         1   1     2          A
## 4       125         1   1     2          A
## 5       136         1   1     3          A
## 6       142         1   1     3          A
## 7       150         1   2     1          A
## 8       148         1   2     1          A
## 9       140         1   2     2          A
## 10      143         1   2     2          A
## 11      160         1   2     3          A
## 12      150         1   2     3          A
## 13      157         2   1     1          B
## 14      145         2   1     1          B
## 15      154         2   1     2          B
## 16      142         2   1     2          B
## 17      147         2   1     3          B
## 18      153         2   1     3          B
## 19      151         2   2     1          B
## 20      155         2   2     1          B
## 21      147         2   2     2          B
## 22      147         2   2     2          B
## 23      162         2   2     3          B
## 24      152         2   2     3          B
## 25      134         3   1     1          C
## 26      125         3   1     1          C
## 27      138         3   1     2          C
## 28      138         3   1     2          C
## 29      135         3   1     3          C
## 30      136         3   1     3          C
## 31      138         3   2     1          C
## 32      140         3   2     1          C
## 33      139         3   2     2          C
## 34      138         3   2     2          C
## 35      134         3   2     3          C
## 36      127         3   2     3          C
</pre></div>
</div></div>




<p>Note that a longer discussion of getting data from excel files is available here: <a href="http://www.r-bloggers.com/read-excel-files-from-r/">http://www.r-bloggers.com/read-excel-files-from-r/</a>.</p>

<hr>

<p id="footnote-1">[1] Note that functions in R - bits of code that do things for you - be it calculate a mean, generate random numbers, plot a graph, etc are denoted with open and closed brackets. - Usually when you run a function you will be asked to provide a number of arguments. In this example 'c' is the function, and the arguments are the numbers that follow.</p>



</body>

</html>
