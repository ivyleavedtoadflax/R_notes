<html>

<head>
<title>Getting Started with R - Data structures</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css">

</head>

<body>

<h1>Data structures</h1>

<h2>Long and wide data</h2>

<p>The astute among you may have noticed, that although I have recommended that you save your data in 'long' format, all the datasets loaded from R and elsewhere, so far, have been in 'wide' rather than 'long' format.</p>

<p>What exactly do we mean by the terms 'long' and 'wide'? And why does it really matter. To give you an example, we'll simulate some data to practice on. This data consist

<p>In this example we will create our own dataset by randomly generating values along a uniform distribution. We'll use a soil science example. We simulate data for an experiment in whcih 120 samples of bulk density <tt>bd</tt>, and organic carbon <tt>oc</tt> were collected in 3 replicate <tt>blocks</tt>, 4 <tt>treatments</tt>, and at 6 <tt>depths</tt>.</p>

<!--begin.rcode,tidy=TRUE

set.seed(1337)

# For brevity the commands have been called lazily!

oc_data <- data.frame(
     block = rep(1:3,each=40),
     treatment = rep(rep(LETTERS[1:4],each=6),length.out=120),     
     depth = rep(1:6,each=20),
     oc = rev(sort(abs(c(5,3,2.2,1.8,1.2,1)+runif(120,min=-1.5,max=1.5)))),
     bd = rev(sort(runif(120,min=0.85,max=1.6)))
     )

head(oc_data)
str(oc_data)


end.rcode-->

<p>This makes for a reasonably complicated factorial experiment. If we want to get somethign sensible from it, we need to convert it to long format first. We use the package <tt>reshape</tt> to do this...</p>

<!--begin.rcode,tidy=FALSE,eval=1:3,message=FALSE,warning=FALSE,echo=-1

require(reshape)

oc_data_m <- melt(
     oc_data,
     id.vars = 1:3,
     measure.vars = 4:5
     )

head(oc_data_m)

# I won't run this command for brevity, but you should!:

oc_data_m


end.rcode-->



</body>

</html>
